

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; Chicago Crime Data Documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="visualization.visualize" href="_autosummary/visualization.visualize.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Chicago_Crime_Data
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Chicago Crime Data README</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Python Modules</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="#Load-data">Load data</a></li>
<li class="toctree-l1"><a class="reference internal" href="#Visually-Explore-Data">Visually Explore Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Monthly-crime-reports-over-all-collected-data">Monthly crime reports over all collected data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Crime-reports-for-every-day-of-data-as-a-function-of-time-of-day">Crime reports for every day of data as a function of time of day</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Modeling">Modeling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#PCA-analysis">PCA analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Gaussian-Mixture-Models">Gaussian Mixture Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Weekday-behaviors">Weekday behaviors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Weekend-behaviors">Weekend behaviors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Some-days-weekends-behave-like-weekdays,-and-some-weekdays-behave-like-weekends">Some days weekends behave like weekdays, and some weekdays behave like weekends</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Chicago_Crime_Data</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/0.1-cristian-Chicago_Crime.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 8ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>%load_ext autoreload
%autoreload 2

import matplotlib.pyplot as plt
import seaborn as sns
%matplotlib inline
import pandas as pd
from sklearn.decomposition import PCA
import numpy as np
import datetime

from src.data.get_data import get_url_data

from src.features.df_functions import str_pad, convert_time
</pre></div>
</div>
</div>
<div class="section" id="Introduction">
<h1>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">¶</a></h1>
<p>An exploration of reported Chicago Crime data. This dataset reflects
reported incidents of crime (with the exception of murders where data
exists for each victim) that occurred in the City of Chicago from 2001
to present, minus the most recent seven days. Data is extracted from the
Chicago Police Department’s CLEAR (Citizen Law Enforcement Analysis and
Reporting) system.</p>
<p>This report visually explores the data for trends. It also looks for
trends using PCA and Gaussian Mixture Models. Through the latter, we see
the crime reporting behaves in two distinct patterns: Weekday and
Weekend. Weekday crime reporting tends to peak around noon. For
Weekends, the flux of crime reports is steady throughout the day.</p>
<p>However, we do see some weekdays behave like weekends, and conversely,
some weekends behave like weekdays. Specifically, there are Tuesdays
that behave like weekends, i.e.&nbsp;more crime is reported. Some of those
happen to be Christmas, New Years, and July 4th—American holidays. And
the two Sundays that behaved like weekdays coincide with playoff games,
which might say more about Chicagoans than it’s reported crime rates do.</p>
<p>In summary, more crimes are reported (or perhaps committed?) during
hours of leisure.</p>
</div>
<div class="section" id="Load-data">
<h1>Load data<a class="headerlink" href="#Load-data" title="Permalink to this headline">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>%%time
data = get_url_data()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
...loading csv
CPU times: user 10.7 s, sys: 1.09 s, total: 11.8 s
Wall time: 13.1 s
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(&#39;Number of observations: {:,.0f}&#39;.format(len(data)))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Number of observations: 1,827,766
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># converts time column to formatted timestamps
data = convert_time(data)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># generate counts for timestamps
data_time = data[&#39;Time Occurred&#39;].groupby(data.index.floor(&#39;1min&#39;)).agg([ &#39;count&#39;])
data_time.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2010-01-01 00:01:00</th>
      <td>3</td>
    </tr>
    <tr>
      <th>2010-01-01 00:02:00</th>
      <td>1</td>
    </tr>
    <tr>
      <th>2010-01-01 00:05:00</th>
      <td>2</td>
    </tr>
    <tr>
      <th>2010-01-01 00:10:00</th>
      <td>6</td>
    </tr>
    <tr>
      <th>2010-01-01 00:15:00</th>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</div>
<div class="section" id="Visually-Explore-Data">
<h1>Visually Explore Data<a class="headerlink" href="#Visually-Explore-Data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="Monthly-crime-reports-over-all-collected-data">
<h2>Monthly crime reports over all collected data<a class="headerlink" href="#Monthly-crime-reports-over-all-collected-data" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(1, 1, figsize=(12, 6))
title = &#39;Monthly crime reports&#39;
data_time[data_time.index &lt;=
          &#39;2018-09-01&#39;].resample(&#39;M&#39;).sum().plot(ax=ax, legend=None, title=title)
plt.ylim(0, None)
plt.xlabel(&#39;&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[8]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x11ff56278&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_9_1.png" src="_images/0.1-cristian-Chicago_Crime_9_1.png" />
</div>
</div>
</div>
<div class="section" id="Crime-reports-for-every-day-of-data-as-a-function-of-time-of-day">
<h2>Crime reports for every day of data as a function of time of day<a class="headerlink" href="#Crime-reports-for-every-day-of-data-as-a-function-of-time-of-day" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>pivoted = data_time.pivot_table(&#39;count&#39;, index=data_time.index.floor(&#39;1min&#39;).time, columns=data_time.index.date, fill_value=0)
pivoted.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>2010-01-01</th>
      <th>2010-01-02</th>
      <th>2010-01-03</th>
      <th>2010-01-04</th>
      <th>2010-01-05</th>
      <th>2010-01-06</th>
      <th>2010-01-07</th>
      <th>2010-01-08</th>
      <th>2010-01-09</th>
      <th>2010-01-10</th>
      <th>...</th>
      <th>2018-09-13</th>
      <th>2018-09-14</th>
      <th>2018-09-15</th>
      <th>2018-09-16</th>
      <th>2018-09-17</th>
      <th>2018-09-18</th>
      <th>2018-09-19</th>
      <th>2018-09-20</th>
      <th>2018-09-21</th>
      <th>2018-09-22</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>00:01:00</th>
      <td>3</td>
      <td>8</td>
      <td>4</td>
      <td>2</td>
      <td>5</td>
      <td>3</td>
      <td>5</td>
      <td>3</td>
      <td>6</td>
      <td>10</td>
      <td>...</td>
      <td>7</td>
      <td>6</td>
      <td>10</td>
      <td>10</td>
      <td>6</td>
      <td>13</td>
      <td>9</td>
      <td>4</td>
      <td>6</td>
      <td>3</td>
    </tr>
    <tr>
      <th>00:02:00</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>00:03:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>00:04:00</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>00:05:00</th>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>3</td>
      <td>2</td>
      <td>3</td>
      <td>3</td>
      <td>2</td>
      <td>0</td>
      <td>3</td>
      <td>...</td>
      <td>3</td>
      <td>1</td>
      <td>4</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>2</td>
      <td>5</td>
      <td>5</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 3187 columns</p>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>pivoted.plot(legend=False, alpha = 0.1, figsize=(16,9), title = &#39;Traces for {} days of reports&#39;.format(len(pivoted.columns)));
plt.ylabel(&#39;Crime Reports&#39;)
plt.xlabel(&#39;Time of day&#39;)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[34]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.text.Text at 0x11e594518&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_12_1.png" src="_images/0.1-cristian-Chicago_Crime_12_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="Modeling">
<h1>Modeling<a class="headerlink" href="#Modeling" title="Permalink to this headline">¶</a></h1>
<div class="section" id="PCA-analysis">
<h2>PCA analysis<a class="headerlink" href="#PCA-analysis" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># create PCA object
pca= PCA()
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># observations in rows

# calculate loading scores and variation each principle compenent acount for
scaled_data = pivoted.T
pca.fit(scaled_data)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[12]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>PCA(copy=True, iterated_power=&#39;auto&#39;, n_components=None, random_state=None,
  svd_solver=&#39;auto&#39;, tol=0.0, whiten=False)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># generate coordinates based on loading scores and scaled data
pca_data = pca.transform(scaled_data)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># scree plot
# generate percentage that each PCA accounts for
per_var = np.round(pca.explained_variance_ratio_*100, decimals=1)
# generate labels for scree plot
labels = [&#39;PC&#39; + str(num) for num in range(1, len(per_var) + 1)]
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(1, 1, figsize=(12,6))
plt.bar(left=range(1, 20), height = per_var[0:19], tick_label=labels[0:19])
plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_19_0.png" src="_images/0.1-cristian-Chicago_Crime_19_0.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># generate df with pca coordinates, variables are presented as rows, thus the index should be variable names, the columns represent the different PCA axis
pca_df = pd.DataFrame(pca_data, index = pivoted.T.index.values,columns=labels)
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>pca_df.head()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PC1</th>
      <th>PC2</th>
      <th>PC3</th>
      <th>PC4</th>
      <th>PC5</th>
      <th>PC6</th>
      <th>PC7</th>
      <th>PC8</th>
      <th>PC9</th>
      <th>PC10</th>
      <th>...</th>
      <th>PC1429</th>
      <th>PC1430</th>
      <th>PC1431</th>
      <th>PC1432</th>
      <th>PC1433</th>
      <th>PC1434</th>
      <th>PC1435</th>
      <th>PC1436</th>
      <th>PC1437</th>
      <th>PC1438</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2010-01-01</th>
      <td>-47.152188</td>
      <td>16.946524</td>
      <td>3.404645</td>
      <td>0.198449</td>
      <td>-4.633534</td>
      <td>-1.115146</td>
      <td>1.572401</td>
      <td>-0.510697</td>
      <td>-0.577448</td>
      <td>-3.542706</td>
      <td>...</td>
      <td>0.028720</td>
      <td>-0.020969</td>
      <td>0.026601</td>
      <td>-0.011574</td>
      <td>0.005671</td>
      <td>-0.019609</td>
      <td>-0.009661</td>
      <td>-0.005698</td>
      <td>0.014349</td>
      <td>0.011784</td>
    </tr>
    <tr>
      <th>2010-01-02</th>
      <td>-35.122274</td>
      <td>1.091027</td>
      <td>4.436384</td>
      <td>4.385195</td>
      <td>6.024288</td>
      <td>-4.267457</td>
      <td>3.185112</td>
      <td>2.607650</td>
      <td>-2.695581</td>
      <td>-2.240907</td>
      <td>...</td>
      <td>-0.039363</td>
      <td>-0.029664</td>
      <td>0.016520</td>
      <td>-0.027974</td>
      <td>-0.015012</td>
      <td>-0.006912</td>
      <td>0.042668</td>
      <td>0.007663</td>
      <td>-0.024588</td>
      <td>0.012324</td>
    </tr>
    <tr>
      <th>2010-01-03</th>
      <td>-35.027476</td>
      <td>2.779998</td>
      <td>-3.652319</td>
      <td>2.432474</td>
      <td>-0.912626</td>
      <td>2.656788</td>
      <td>-0.230950</td>
      <td>-0.096006</td>
      <td>-2.876035</td>
      <td>1.910059</td>
      <td>...</td>
      <td>0.046643</td>
      <td>-0.023867</td>
      <td>0.023256</td>
      <td>-0.048993</td>
      <td>0.020619</td>
      <td>0.043542</td>
      <td>0.002398</td>
      <td>0.002390</td>
      <td>-0.009306</td>
      <td>-0.024460</td>
    </tr>
    <tr>
      <th>2010-01-04</th>
      <td>-25.848661</td>
      <td>-1.949269</td>
      <td>1.086502</td>
      <td>-1.338002</td>
      <td>-2.086197</td>
      <td>-1.060601</td>
      <td>1.763883</td>
      <td>5.046089</td>
      <td>-2.654646</td>
      <td>-1.901781</td>
      <td>...</td>
      <td>0.005797</td>
      <td>0.025494</td>
      <td>-0.014706</td>
      <td>-0.080834</td>
      <td>0.004578</td>
      <td>-0.040916</td>
      <td>-0.014588</td>
      <td>0.037911</td>
      <td>-0.008122</td>
      <td>-0.002751</td>
    </tr>
    <tr>
      <th>2010-01-05</th>
      <td>-17.676446</td>
      <td>-3.366142</td>
      <td>2.402381</td>
      <td>3.131339</td>
      <td>0.537546</td>
      <td>0.227890</td>
      <td>-8.078550</td>
      <td>9.418479</td>
      <td>-3.550084</td>
      <td>0.184492</td>
      <td>...</td>
      <td>0.019269</td>
      <td>0.004990</td>
      <td>0.023384</td>
      <td>-0.021063</td>
      <td>0.013738</td>
      <td>0.017831</td>
      <td>0.073808</td>
      <td>0.010084</td>
      <td>0.002871</td>
      <td>0.028127</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 1438 columns</p>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>day_of_week = pd.DatetimeIndex(pivoted.columns).dayofweek
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>fig, ax = plt.subplots(1, 1, figsize=(12,6))
plt.scatter(pca_df[&#39;PC1&#39;],pca_df[&#39;PC2&#39;], c = day_of_week, cmap=&#39;rainbow&#39;);
plt.colorbar();
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_23_0.png" src="_images/0.1-cristian-Chicago_Crime_23_0.png" />
</div>
</div>
</div>
<div class="section" id="Gaussian-Mixture-Models">
<h2>Gaussian Mixture Models<a class="headerlink" href="#Gaussian-Mixture-Models" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from sklearn.mixture import GaussianMixture
gmm = GaussianMixture(2)
gmm.fit(scaled_data)
labels = gmm.predict(scaled_data)
labels
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[20]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>array([0, 0, 0, ..., 0, 0, 0])
</pre></div>
</div>
</div>
<div class="section" id="Weekday-behaviors">
<h3>Weekday behaviors<a class="headerlink" href="#Weekday-behaviors" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># filters the columns with labels of array of 0s and 1s
pivoted.T[labels==1].T.plot(legend=False, alpha = 0.1,  figsize=(16,9));
plt.xlim(datetime.time(3, 0),datetime.time(23, 59));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_27_0.png" src="_images/0.1-cristian-Chicago_Crime_27_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># Isolates weekdays
pd.Series(pd.DatetimeIndex(pivoted.T[labels==1].index).strftime(&#39;%a&#39;)).value_counts()[::-1].plot(kind=&#39;barh&#39;);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_28_0.png" src="_images/0.1-cristian-Chicago_Crime_28_0.png" />
</div>
</div>
</div>
<div class="section" id="Weekend-behaviors">
<h3>Weekend behaviors<a class="headerlink" href="#Weekend-behaviors" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># filters the columns with labels of array of 0s and 1s
pivoted.T[labels==0].T.plot(legend=False, alpha = 0.1,  figsize=(16,9));
plt.xlim(datetime.time(3, 0),datetime.time(23, 59));
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_30_0.png" src="_images/0.1-cristian-Chicago_Crime_30_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># Isolates weekends
pd.Series(pd.DatetimeIndex(pivoted.T[labels==0].index).strftime(&#39;%a&#39;)).value_counts()[::-1].plot(kind=&#39;barh&#39;);
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/0.1-cristian-Chicago_Crime_31_0.png" src="_images/0.1-cristian-Chicago_Crime_31_0.png" />
</div>
</div>
</div>
<div class="section" id="Some-days-weekends-behave-like-weekdays,-and-some-weekdays-behave-like-weekends">
<h3>Some days weekends behave like weekdays, and some weekdays behave like weekends<a class="headerlink" href="#Some-days-weekends-behave-like-weekdays,-and-some-weekdays-behave-like-weekends" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># Solve for Tue
Tue_index  = pd.DatetimeIndex(pivoted.T[labels==0].index).strftime(&#39;%a&#39;)==&#39;Tue&#39;
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># All Tuesdays that behave like Weekends
pd.DatetimeIndex(pivoted.T[labels==0].index)[Tue_index]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[39]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>DatetimeIndex([&#39;2010-01-05&#39;, &#39;2010-01-12&#39;, &#39;2010-01-19&#39;, &#39;2010-03-09&#39;,
               &#39;2011-02-22&#39;, &#39;2012-12-25&#39;, &#39;2013-01-01&#39;, &#39;2013-12-24&#39;,
               &#39;2017-07-04&#39;, &#39;2018-09-18&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=None)
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># Solve for Sun
Sun_index  = pd.DatetimeIndex(pivoted.T[labels==1].index).strftime(&#39;%a&#39;)==&#39;Sun&#39;
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>In [44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span># All Sundays that behave like Weekdays
pd.DatetimeIndex(pivoted.T[labels==1].index)[Sun_index]
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre>
<span></span>Out[44]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>DatetimeIndex([&#39;2017-04-30&#39;, &#39;2017-10-22&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="_autosummary/visualization.visualize.html" class="btn btn-neutral" title="visualization.visualize" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Cristian Heredia

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>